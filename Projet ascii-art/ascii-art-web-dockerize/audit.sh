#!/bin/bash

echo "****************************************************************************************************"
echo "********************* Programme d'execution des commandes attendues à l'audit. *********************"
echo "****************************************************************************************************"
echo
# Création de l'image et affichage des images.
echo "****************************************************************************************************"
echo "************ Commandes :\"docker image build [OPTIONS] PATH | URL | -\" et \"docker images\" ***********"
echo "****************************************************************************************************"
docker image build -f dockerfile -t ascii_art_dockerize .
echo "******************************************* Image créée. *******************************************"
docker images
echo "****************************************************************************************************"
echo
# Lancement du container et affichage de tous les containers.
echo "****************************************************************************************************"
echo "****** Commandes : \"docker container run [OPTIONS] IMAGE [COMMAND] [ARG...]\" et \"docker ps -a\" *****".
echo "****************************************************************************************************"
docker container run -d -p 8080:8080 --name ascii_art_dockerize ascii_art_dockerize
echo "**************************************** Container lancé. ******************************************"
docker ps -a
echo "****************************************************************************************************"
echo
# Eccès à l'image et affichage des fichiers et les droits.
echo "****************************************************************************************************"
echo "********* Commandes :\"docker exec -it <container_name> /bin/bash\" puis : \"ls -l\" et \"exit\" *********"
echo "****************************************************************************************************"
docker exec -it ascii_art_dockerize /bin/bash
echo "****************************************************************************************************"
echo
# Inspecter pour voir les metadata
echo "****************************************************************************************************"
echo "************************** Inspection de l'image pour repérer les métadata *************************"
echo "****************************************************************************************************"
docker inspect ascii_art_dockerize
echo "****************************************************************************************************"
echo

echo "****************************************************************************************************"
echo "************************************* Adresse du site internet *************************************"
echo "************************************** http://localhost:8080 ***************************************"
echo "****************************************************************************************************"
echo