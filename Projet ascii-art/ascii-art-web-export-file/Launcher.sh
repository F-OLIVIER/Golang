#!/bin/bash
# Stoppe le container nommé
echo "****************************************************************************************************"
echo "**************************************** Arrêt du container. ***************************************"
echo "****************************************************************************************************"
docker stop ascii_art_dockerize
echo "****************************************** Container arrêté.****************************************"
echo
# Supprime le container nommé
echo "****************************************************************************************************"
echo "************************************* Suppression du container. ************************************"
echo "****************************************************************************************************"
docker rm ascii_art_dockerize
echo "**************************************** Container supprimé. ***************************************"
echo
# Suppression de l'image au nom précisé.
echo "****************************************************************************************************"
echo "**** Suppression d'une éventuelle image portant déja le nom de l'image que l'on souhaite créer. ****"
echo "****************************************************************************************************"
docker container rm -f ascii_art_dockerize
echo "*********************************** Plus d'image au nom précisé. ***********************************"
echo
# Vidage du cache.
echo "****************************************************************************************************"
echo "***************************************** Vidage du cache. *****************************************"
echo "****************************************************************************************************"
docker image prune
echo "******************************************** Cache vidé. *******************************************"
echo
# Création de l'image au nom précisé dans le dockerfile.
echo "****************************************************************************************************"
echo "************************* Création de l'image nommée ascii_art_dockerize ***************************"
echo "****************************************************************************************************"
docker build --tag ascii_art_dockerize .
echo "******************************************* Image Créée. *******************************************"
echo
# Créé et lance le container -d detash (console accessible), -p publish (ports e:s) --name (definition du nom du container) + nom de l'image
echo "****************************************************************************************************"
echo "******************* Création et execution du container nommé ascii_art_dockerize *******************"
echo "************************ sur le port TCP 8080 et détachement de la console *************************"
echo "****************************************************************************************************"
docker run -d -p 8080:8080 --name ascii_art_dockerize ascii_art_dockerize
echo "*********************************** Container créé et executé. *************************************"
echo

echo "****************************************************************************************************"
echo "************************************* Adresse du site internet *************************************"
echo "************************************** http://localhost:8080 ***************************************"
echo "****************************************************************************************************"

